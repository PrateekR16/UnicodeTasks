<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

    <style>
        .taskinput {
            display: flex;
            flex-flow: column wrap;
            justify-content: left;
            margin: auto;
            border: 2px solid black;
            padding: 1em 2em;
            margin: 0.5em;
            align-items: flex-start;
        }

        input {
            margin: 0.5em 0.5em;
        }

        .userinput {
            color: aqua;

        }

        .error {
            background: orangered;
            color: #fff;
            padding: 5px;
            margin: 5px;
        }
    </style>
</head>

<body>

    <h2>
        Welcome!
    </h2>

    <h4>
        Keep track of your time and increase your productivity.
    </h4>


    <div class="time-display"></div>

    <div class="taskinput">
        <form action="" id="my-form">
            <div class="msg"></div>
            WHAT ARE YOU WORKING ON? : <input type="text" id="taskname" value="">
            DATE : <input type="date" name="" id="date" value="">
            START-TIME : <input type="time" id="stime" value="">
            END-TIME : <input type="time" id="etime" value="">
            MANDATORY : <input type="radio" id="yes"> <label for="yes">YES</label> <input type="radio" name="" id="no">
            <label for="no">NO</label>

            <input type="submit" value="SUBMIT">

        </form>



    </div>
    <h2 class="text-center m-2 mt-4 p-3 border border-dark">TASK LOG</h2>
    <ul id="task-display" class="m-3 p-3"></ul>



    <script>

        let myForm = document.querySelector('#my-form');
        let taskInput = document.querySelector('#taskname');
        let dateInput = document.querySelector('#date');
        let startTimeInput = document.querySelector('#stime');
        let endTimeInput = document.querySelector('#etime');
        let msg = document.querySelector('.msg');
        let totalTime = document.querySelector('.time-display');
        let inputList = document.querySelector('#task-display');
        let taskList = document.createElement('form');



        // Listen for form submit
        myForm.addEventListener('submit', onSubmit);

        function onSubmit(e) {
            e.preventDefault();

            if (taskInput.value === '' || dateInput.value === '' || startTimeInput.value === '' || endTimeInput.value === '') {
                // alert('Please enter all fields');
                msg.classList.add('msg');
                msg.innerHTML = 'Please enter all fields';

                // Remove error after 3 seconds
                setTimeout(() => msg.remove(), 3000);
            }
            else {

                taskList.innerHTML =` <span>TASK NAME : </span><input type="text" value="${taskInput.value}"></input>
                
                    <span>DATE : </span><input type="date"value="${dateInput.value}"></input>
                
                    <span>START TIME: </span><input type="time" value="${startTimeInput.value}"></input>
                
                    <span>END TIME : </span><input type="time" value="${endTimeInput.value}"></input>
                    
                    <button  type="button"" id="complete-button" class="btn btn-success text-white m-3 p-2">Complete</button>
                    
                    <button type="button"  class="btn btn-dark text-white m-3 p-2" onclick="edit()">Edit</button>

                    <button  type="button" class="btn btn-danger text-white m-3 p-2" onclick="delete()">Delete</button>`;

                 inputList.appendChild(taskList);
                 
                             var tim1 = startTimeInput.value, tim2 = endTimeInput.value;
                             var ary1 = tim1.split(':'), ary2 = tim2.split(':');
                             var minsdiff = parseInt(ary2[0], 10) * 60 + parseInt(ary2[1], 10) - parseInt(ary1[0], 10) * 60 - parseInt(ary1[1], 10);
                             console.log(minsdiff);
                             totalTime.innerHTML =
                                 `
                                     <p>The total time taken is ${minsdiff} minutes.</p> 
                 
                                    `
                 
                 


                taskInput.value = '';
                dateInput.value = '';
                startTimeInput.value = '';
                endTimeInput.value = '';
            }
        }



    </script>





</body>

</html>